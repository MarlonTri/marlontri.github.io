(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,i){e.exports=i(21)},19:function(e,t,i){},21:function(e,t,i){"use strict";i.r(t);var s=i(7),n=i.n(s),a=i(11),o=i.n(a),r=(i(19),i(1)),h=i(5),c=i(3),l=i(2),m=i(4),d=i(6),u=i(0),p=i(12),y=i(8),b=i(9),v=function(){function e(t,i){Object(r.a)(this,e),this.scene=t,this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.buffer=3,this.velocity=new u.Fb(0,0,0),this.position=new u.Fb(0,0,0),this.direction=new u.Fb(0,0,0),this.orientation=new u.Fb(-1,0,0),this.actions={moveForward:!1,moveBackward:!1,moveLeft:!1,moveRight:!1,canJump:!1},this.dampening=40,this.speed=1e4,this.parent=new u.cb,this.parent.add(i.spider.val.scene),i.spider.val.scene.rotateOnAxis(new u.Fb(0,1,0),1.57075),t.add(this.parent)}return Object(h.a)(e,[{key:"onKeyDown",value:function(e){switch(e.code){case"ArrowUp":case"KeyW":this.actions.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.actions.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.actions.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.actions.moveRight=!0;break;case"Space":!0===this.actions.canJump&&(this.velocity.y+=200);break;default:console.log("Unknown key input: "+e.code)}}},{key:"onKeyUp",value:function(e){switch(e.code){case"ArrowUp":case"KeyW":this.actions.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.actions.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.actions.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.actions.moveRight=!1;break;default:console.log("Unknown key input: "+e.code)}}},{key:"update",value:function(e,t,i){this.velocity.x-=this.velocity.x*this.dampening*e,this.velocity.z-=this.velocity.z*this.dampening*e,this.velocity.y-=.01*this.velocity.y*this.dampening*e,this.velocity.y-=9.8*100*e,this.direction.z=Number(this.actions.moveForward)-Number(this.actions.moveBackward),this.direction.x=Number(this.actions.moveRight)-Number(this.actions.moveLeft),this.direction.normalize(),0==this.direction.x&&0==this.direction.z||(this.direction.applyQuaternion(i.clone().invert()),this.direction.y=0,this.direction.normalize(),this.velocity.z-=this.direction.z*this.speed*e,this.velocity.x-=this.direction.x*this.speed*e),this.position.x+=-this.velocity.x*e,this.position.z+=this.velocity.z*e;var s=[],n=this.scene.children.filter(function(e){return"blossom"==e.name});if(n.length>0&&this.buffer-this.velocity.y*e>0){var a=this.position.clone();a.y=a.y,s=new u.qb(this.position,new u.Fb(0,-1,0),0,this.buffer-this.velocity.y*e).intersectObject(n[0])}s.length>0?(this.position.y=s[0].point.y+this.buffer,this.velocity.y=0):this.position.y+=this.velocity.y*e,this.position.y<0&&(this.velocity.y=0,this.position.y=0,this.actions.canJump=!0);var o=this.velocity.clone();o.x=-o.x,0!=o.length()&&(o.y=o.y/2,this.orientation.lerp(o.normalize(),.131),this.orientation.normalize());var r=new u.lb;r.setFromUnitVectors(this.orientation,new u.Fb(0,-1,0)),r.multiply((new u.lb).setFromUnitVectors(new u.Fb(0,-1,0),new u.Fb(-1,0,0))),(new u.p).setFromQuaternion(r),this.parent.lookAt(this.parent.position.clone().sub(this.orientation)),this.parent.position.copy(this.position.clone())}}]),e}(),w=function(){function e(t,i){Object(r.a)(this,e),this.scene=t,this.meshes={stem:void 0,blossom:void 0},this.spawnRegionSize=12e3,this.count=2e3,this.ages=new Float32Array(this.count),this.scales=new Float32Array(this.count),this.phaseSpeed=.02,this.maxHeight=600,this.dummy=new u.cb,this.dummyPos=new u.Fb(0,0,0),this.dummyNorm=new u.Fb(0,1,0),this.dummyScale=new u.Fb(1,1,1),this.init(i.flower.val)}return Object(h.a)(e,[{key:"init",value:function(e){var t=e.scene.getObjectByName("Stem"),i=e.scene.getObjectByName("Blossom"),s=t.geometry.clone(),n=i.geometry.clone(),a=(new u.R).makeRotationX(Math.PI/2).multiply((new u.R).makeScale(7,7,7));s.applyMatrix4(a),n.applyMatrix4(a);var o=t.material,r=new u.T({color:16777215,opacity:.9,transparent:!0});this.meshes.stem=new u.y(s,o,this.count),this.meshes.blossom=new u.y(n,r,this.count);for(var h=new u.i,c=[15861127,15914105,15911033,15904887,15877125],l=0;l<this.count;l++)h.setHex(c[Math.floor(Math.random()*c.length)]),this.meshes.blossom.setColorAt(l,h);this.meshes.stem.instanceMatrix.setUsage(u.o),this.meshes.blossom.instanceMatrix.setUsage(u.o),this.meshes.stem.name="stem",this.meshes.blossom.name="blossom",this.resample(),this.scene.add(this.meshes.stem),this.scene.add(this.meshes.blossom)}},{key:"resample",value:function(){for(var e=0;e<this.count;e++)this.resampleParticle(e);this.meshes.stem.instanceMatrix.needsUpdate=!0,this.meshes.blossom.instanceMatrix.needsUpdate=!0}},{key:"resampleParticle",value:function(e){this.ages[e]=Math.random(),this.scales[e]=this.scaleCurve(this.ages[e]),this.dummyPos.x=2*this.spawnRegionSize*(Math.random()-.5),this.dummyPos.z=2*this.spawnRegionSize*(Math.random()-.5),this.dummy.position.copy(this.dummyPos),this.dummy.scale.set(this.scales[e],this.scales[e],this.scales[e]),this.dummy.lookAt(this.dummyNorm),this.dummy.updateMatrix(),this.meshes.stem.setMatrixAt(e,this.dummy.matrix),this.meshes.blossom.setMatrixAt(e,this.dummy.matrix)}},{key:"scaleCurve",value:function(e){return this.maxHeight*Math.abs(this.easeOutCubic(2*(e>.5?1-e:e)))}},{key:"easeOutCubic",value:function(e){return--e*e*e+1}},{key:"updateParticle",value:function(e,t){if(this.ages[e]+=t*this.phaseSpeed,this.ages[e]>=1)return this.ages[e]=.005,this.scales[e]=this.scaleCurve(this.ages[e]),void this.resampleParticle(e);var i=this.scales[e];this.scales[e]=this.scaleCurve(this.ages[e]),this.dummyScale.set(this.scales[e]/i,this.scales[e]/i,this.scales[e]/i),this.meshes.stem.getMatrixAt(e,this.dummy.matrix),this.dummy.matrix.scale(this.dummyScale),this.meshes.stem.setMatrixAt(e,this.dummy.matrix),this.meshes.blossom.setMatrixAt(e,this.dummy.matrix)}},{key:"update",value:function(e){if(this.meshes.stem&&this.meshes.blossom){for(var t=0;t<this.count;t++)this.updateParticle(t,e);this.meshes.stem.instanceMatrix.needsUpdate=!0,this.meshes.blossom.instanceMatrix.needsUpdate=!0}}}]),e}(),f=i(13),g=function(){function e(t){var i=this;Object(r.a)(this,e),this.promises=[];for(var s=function(){var e=a[n],t=(o=Object(f.a)(e,2))[0],s=o[1],r=void 0;switch(s.type){case"GLTF":r=i.loadGLTF(s.url);break;case"RGBE":r=i.loadRGBE(s.url);break;case"Cube":r=i.loadCube(s.path,s.urls);break;default:console.log("ERROR: unknown import type - "+s.type)}i.promises.push(r.then(function(e){s.val=e,s.confirm="Confirmed - "+t}))},n=0,a=Object.entries(t);n<a.length;n++){var o;s()}return Promise.all(this.promises)}return Object(h.a)(e,[{key:"loadGLTF",value:function(e){return new Promise(function(t){(new y.a).load(e,t)})}},{key:"loadRGBE",value:function(e){return new Promise(function(t){(new b.a).load(e,t)})}},{key:"loadCube",value:function(e,t){var i=new u.j;return i.setPath(e),new Promise(function(e){i.load(t,e)})}}]),e}(),k=function(e){function t(e){var i;return Object(r.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this,e))).state={},i.resDict={spider:{type:"GLTF",url:"/Assets/spider.gltf"},texCube:{type:"Cube",path:"https://threejs.org/examples/textures/cube/Bridge2/",urls:["posx.jpg","negx.jpg","posy.jpg","negy.jpg","posz.jpg","negz.jpg"]},flower:{type:"GLTF",url:"https://threejs.org/examples/models/gltf/Flower/Flower.glb"}},i.loadPromise=new g(i.resDict).then(function(e){console.log("INFO: All assets loaded!")}),i.start=i.start.bind(Object(d.a)(Object(d.a)(i))),i.stop=i.stop.bind(Object(d.a)(Object(d.a)(i))),i.animate=i.animate.bind(Object(d.a)(Object(d.a)(i))),i.renderScene=i.renderScene.bind(Object(d.a)(Object(d.a)(i))),i.setupScene=i.setupScene.bind(Object(d.a)(Object(d.a)(i))),i.destroyContext=i.destroyContext.bind(Object(d.a)(Object(d.a)(i))),i.handleWindowResize=i.handleWindowResize.bind(Object(d.a)(Object(d.a)(i))),i}return Object(m.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){window.addEventListener("resize",this.handleWindowResize)}},{key:"componentDidMount",value:function(){var e=this;this.loadPromise.then(function(){e.setupScene()})}},{key:"setupScene",value:function(){this.width=this.container.clientWidth,this.height=this.container.clientHeight;var e=new u.Hb({antialias:!0});e.setPixelRatio(window.devicePixelRatio),e.shadowMap.enabled=!0,e.gammaOutput=!0,e.gammaFactor=2.2,e.shadowMap.type=u.eb;var t=new u.sb,i=new u.fb(60,this.width/this.height,.25,12e3);t.add(i),this.renderer=e,this.scene=t,this.camera=i,this.player=new v(t,this.resDict);var s=new w(t,this.resDict);this.sceneMap=s,document.addEventListener("keydown",this.player.onKeyDown),document.addEventListener("keyup",this.player.onKeyUp);var n=new u.u(9e3,200);n.position.y=2,t.add(n);var a=new u.Ab,o=new u.S(new u.gb(1e4,1e4,200,200),new u.U({specular:1118481,map:a.load("https://threejs.org/examples/models/gltf/LeePerrySmith/Map-COL.jpg"),specularMap:a.load("https://threejs.org/examples/models/gltf/LeePerrySmith/Map-SPEC.jpg"),normalMap:a.load("https://threejs.org/examples/models/gltf/LeePerrySmith/Infinite-Level_02_Tangent_SmoothUV.jpg"),shininess:25})),r=this.resDict.texCube.val;r.encoding=u.Ib,t.background=r,o.position.y=-.1,o.rotation.x=-Math.PI/2,t.add(o),new u.xb(16777215,.25).position.set(45,50,15);var h=new u.a(3355443);h.position.set(5,3,5),this.camera.add(h),this.camera.lookAt(this.player.position.clone()),this.camera.updateProjectionMatrix(),this.camera.position.z=100;var c=new p.a(this.camera,this.renderer.domElement);c.enableDamping=!0,c.dampingFactor=.25,c.enableZoom=!0,c.zoomSpeed=2.1,c.enableKeys=!1,c.screenSpacePanning=!1,c.enableRotate=!0,c.dampingFactor=1,c.autoRotateSpeed=1.2,c.enablePan=!1,c.target.copy(this.player.position),c.update(),this.controls=c,this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.start()}},{key:"start",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.animate))}},{key:"renderScene",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"animate",value:function(){this.sceneMap.update(.01),this.frameId=requestAnimationFrame(this.animate),this.controls.update();var e=this.player.position.clone();this.player.update(.01,!0,this.camera.quaternion);var t=this.player.position.clone().sub(e);this.controls.target.copy(this.player.position),this.camera.position.addVectors(this.camera.position,t),this.renderScene()}},{key:"stop",value:function(){cancelAnimationFrame(this.frameId)}},{key:"handleWindowResize",value:function(){var e=window.innerWidth,t=window.innerHeight;this.camera.aspect=e/t,this.camera.updateProjectionMatrix()}},{key:"componentWillUnmount",value:function(){this.stop(),this.destroyContext()}},{key:"destroyContext",value:function(){this.container.removeChild(this.renderer.domElement),this.renderer.forceContextLoss(),this.renderer.context=null,this.renderer.domElement=null,this.renderer=null}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{ref:function(t){e.container=t},style:{width:"100%",height:"100%",position:"absolute",overflow:"hidden"}})}}]),t}(s.Component),x=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(k,null))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[14,2,1]]]);
//# sourceMappingURL=main.b2b13511.chunk.js.map